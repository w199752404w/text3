/* Created by h00205922, 2024.09.06 for multiple protocols compatible */

#ifndef PTC_ECO_H
#define PTC_ECO_H

#include <stdint.h>

typedef struct {
	uint16_t usByteInversion:1;		//Sequence of 8 bits unit in CAN frame data area, 0-high byte first
	uint16_t usWordInversion:1;		//Sequence of 16 bits unit in CAN frame data area, 0-high word first
	uint16_t usStartBit:6;				//Start bit offset of CAN frame data area, 0 means 8th byte of CAN frame data area bit 0
	uint16_t usBitNum:7;					//Bit number occupied of CAN frame data area 
	uint16_t usSigned:1;					//1-highest bit of variable means sign status
	double fFacA;									//factor a, y = ax + b, x is in CAN frame, y is physic variable
	double fFacB;									//factor b, y = ax + b, x is in CAN frame, y is physic variable
} CAN_VAL_CFG_S;								//External CAN protocol variable format, nothing to do with config information in config.h

typedef struct {
	uint64_t uiCanId:29;
	uint64_t uiDataLen:4;					//0~8
	uint64_t uiPeriod:16;					//auto send out period, unit is ms
} CAN_FRAME_CFG_S;							//External CAN protocol CAN frame format, either nothing to do with config information in config.h

enum ePtcEcoCanVal {
	E_PTC_ECO_CV1_0 = 0,
	E_PTC_ECO_CV1_16,
	E_PTC_ECO_CV1_32,
	E_PTC_ECO_CV1_48,
	E_PTC_ECO_CV2_0,
	E_PTC_ECO_CV2_16,
	E_PTC_ECO_CV2_32,
	E_PTC_ECO_CV2_48,
	E_PTC_ECO_CV3_0,
	E_PTC_ECO_CV3_1,
	E_PTC_ECO_CV3_2,
	E_PTC_ECO_CV3_4,
	E_PTC_ECO_CV3_16,
	E_PTC_ECO_CV3_32,
	E_PTC_ECO_CV3_48,
	E_PTC_ECO_CV4_0,
	E_PTC_ECO_CV4_16,
	E_PTC_ECO_CV4_32,
	E_PTC_ECO_CV4_48,
	E_PTC_ECO_CV5_0,
	E_PTC_ECO_CV5_8,
	E_PTC_ECO_CV5_16,
	E_PTC_ECO_CV5_32,
	E_PTC_ECO_CV5_48,
	E_PTC_ECO_CV6_0,
	E_PTC_ECO_CV6_16,
	E_PTC_ECO_CV6_32,
	E_PTC_ECO_CV6_48,
	E_PTC_ECO_CV7_0,
	E_PTC_ECO_CV7_16,
	E_PTC_ECO_CV7_32,
	E_PTC_ECO_CV7_48,
	E_PTC_ECO_CV8_0,
	E_PTC_ECO_CV8_16,
	E_PTC_ECO_CV8_32,
	E_PTC_ECO_CV8_48,
	E_PTC_ECO_CV9_0,
	E_PTC_ECO_CV9_16,
	E_PTC_ECO_CV9_32,
	E_PTC_ECO_CV9_48,
	E_PTC_ECO_CV10_0,
	E_PTC_ECO_CV10_16,
	E_PTC_ECO_CV10_32,
	E_PTC_ECO_CV10_48,
	E_PTC_ECO_CV11_0,
	E_PTC_ECO_CV11_16,
	E_PTC_ECO_CV11_32,
	E_PTC_ECO_CV11_48,
	E_PTC_ECO_CV12_0,
	E_PTC_ECO_CV12_16,
	E_PTC_ECO_CV13_0,
	E_PTC_ECO_CV13_2,
	E_PTC_ECO_CV13_4,
	E_PTC_ECO_CV13_6,
	E_PTC_ECO_CV13_8,
	E_PTC_ECO_CV13_10,
	E_PTC_ECO_CV13_12,
	E_PTC_ECO_CV13_14,
	E_PTC_ECO_CV13_16,
	E_PTC_ECO_CV13_18,
	E_PTC_ECO_CV13_20,
	E_PTC_ECO_CV13_22,
	E_PTC_ECO_CV13_24,
	E_PTC_ECO_CV13_26,
	E_PTC_ECO_CV13_28,
	E_PTC_ECO_CV13_30,
	E_PTC_ECO_CV13_32,
	E_PTC_ECO_CV13_34,
	E_PTC_ECO_CV14_0,
	E_PTC_ECO_CV14_4,
	E_PTC_ECO_CV14_8,
	E_PTC_ECO_CV14_32,
	E_PTC_ECO_CV14_48,
	E_PTC_ECO_CV14_56,
	E_PTC_ECO_CV15_0,
	E_PTC_ECO_CV15_16,
	E_PTC_ECO_CV15_32,
	E_PTC_ECO_CV15_40,
	E_PTC_ECO_CV16_0,
	E_PTC_ECO_CV16_16,
	E_PTC_ECO_CV17_0,
	E_PTC_ECO_CV17_16,
	E_PTC_ECO_CV17_24,
	E_PTC_ECO_CV17_40,
	E_PTC_ECO_CV17_56,
	E_PTC_ECO_CV18_0,
	E_PTC_ECO_CV18_16,
	E_PTC_ECO_CV18_32,
	E_PTC_ECO_CV18_40,
	E_PTC_ECO_CV19_0,
	E_PTC_ECO_CV19_8,
	E_PTC_ECO_CV19_24,
	E_PTC_ECO_CV19_32,
	E_PTC_ECO_CV19_40,
	E_PTC_ECO_CV19_48,
	E_PTC_ECO_CV19_50,
	E_PTC_ECO_CV19_52,
	E_PTC_ECO_CV19_54,
	E_PTC_ECO_CV19_56,
	E_PTC_ECO_CV19_58,
	E_PTC_ECO_CV19_60,
	E_PTC_ECO_CV19_62,
	E_PTC_ECO_CV20_0,
	E_PTC_ECO_CV20_16,
	E_PTC_ECO_CV20_24,
	E_PTC_ECO_CV20_40,
	E_PTC_ECO_CV20_48,
	E_PTC_ECO_CV21_32,
	E_PTC_ECO_CV22_0,
	E_PTC_ECO_CV22_16,
	E_PTC_ECO_CV22_32,
	E_PTC_ECO_CV22_40,
	E_PTC_ECO_CV22_48,
	E_PTC_ECO_CV23_0,
	E_PTC_ECO_CV23_16,
	E_PTC_ECO_CV23_24,
	E_PTC_ECO_CV23_40,
	E_PTC_ECO_CV24_0,
	E_PTC_ECO_CV24_32,
	E_PTC_ECO_CV24_48,
	E_PTC_ECO_CV25_0,
	E_PTC_ECO_CV25_16,
	E_PTC_ECO_CV25_32,
	E_PTC_ECO_CV26_0,
	E_PTC_ECO_CV26_16,
	E_PTC_ECO_CV26_32,
	E_PTC_ECO_CV26_40,
	E_PTC_ECO_CV27_0,
	E_PTC_ECO_CV27_1,
	E_PTC_ECO_CV27_2,
	E_PTC_ECO_CV27_3,
	E_PTC_ECO_CV27_4,
	E_PTC_ECO_CV27_5,
	E_PTC_ECO_CV27_8,
	E_PTC_ECO_CV27_32,
	E_PTC_ECO_CV27_48,
	E_PTC_ECO_CV27_56,
	E_PTC_ECO_CV28_0,
	E_PTC_ECO_CV28_16,
	E_PTC_ECO_CV28_24,
	E_PTC_ECO_CV28_32,
	E_PTC_ECO_CV28_48,
	E_PTC_ECO_CV28_56,
	E_PTC_ECO_CV29_0,
	E_PTC_ECO_CV29_8,
	E_PTC_ECO_CV29_16,
	E_PTC_ECO_CV29_24,
	E_PTC_ECO_CV29_32,
	E_PTC_ECO_CV29_40,
	E_PTC_ECO_CV30_0,
	E_PTC_ECO_CV30_8,
	E_PTC_ECO_CV30_16,
	E_PTC_ECO_CV30_24,
	E_PTC_ECO_CV30_32,
	E_PTC_ECO_CV30_40,
	E_PTC_ECO_CV31_0,
	E_PTC_ECO_CV31_16,
	E_PTC_ECO_CV31_32,
	E_PTC_ECO_CV31_48,
	E_PTC_ECO_CV32_0,
	E_PTC_ECO_CV32_2,
	E_PTC_ECO_CV32_4,
	E_PTC_ECO_CV32_6,
	E_PTC_ECO_CV32_8,
	E_PTC_ECO_CV32_10,
	E_PTC_ECO_CV32_12,
	E_PTC_ECO_CV32_14,
	E_PTC_ECO_CV32_16,
	E_PTC_ECO_CV32_18,
	E_PTC_ECO_CV32_20,
	E_PTC_ECO_CV32_22,
	E_PTC_ECO_CV32_24,
	E_PTC_ECO_CV32_26,
	E_PTC_ECO_CV32_28,
	E_PTC_ECO_CV32_32,
	E_PTC_ECO_CV32_40,
	E_PTC_ECO_CV33_0,
	E_PTC_ECO_CV33_16,
	E_PTC_ECO_CV33_24,
	E_PTC_ECO_CV33_32,
	E_PTC_ECO_CV33_40,
	E_PTC_ECO_CV34_0,
	E_PTC_ECO_CV34_16,
	E_PTC_ECO_CV34_32,
	E_PTC_ECO_CV34_48,
	E_PTC_ECO_CV34_56,
	E_PTC_ECO_CV34_57,
	E_PTC_ECO_CV35_0,
	E_PTC_ECO_CV35_16,
	E_PTC_ECO_CV35_24,
	E_PTC_ECO_CV35_32,
	E_PTC_ECO_CV35_40,
	E_PTC_ECO_CV35_48,
	E_PTC_ECO_CV36_0,
	E_PTC_ECO_CV36_8,
	E_PTC_ECO_CV36_16,
	E_PTC_ECO_CV36_24,
	E_PTC_ECO_CV36_32,
	E_PTC_ECO_CV36_40,
	E_PTC_ECO_CV36_48,
	E_PTC_ECO_CV36_56,
	E_PTC_ECO_CV37_0,
	E_PTC_ECO_CV37_8,
	E_PTC_ECO_CV37_16,
	E_PTC_ECO_CV37_24,
	E_PTC_ECO_CV37_32,
	E_PTC_ECO_CV37_40,
	E_PTC_ECO_CV37_48,
	E_PTC_ECO_CV37_56,
	E_PTC_ECO_CV38_0,
	E_PTC_ECO_CV38_8,
	E_PTC_ECO_CV38_16,
	E_PTC_ECO_CV38_24,
	E_PTC_ECO_CV38_32,
	E_PTC_ECO_CV38_40,
	E_PTC_ECO_CV38_48,
	E_PTC_ECO_CV38_56,
	E_PTC_ECO_CV39_0,
	E_PTC_ECO_CV39_16,
	E_PTC_ECO_CV39_32,
	E_PTC_ECO_CV39_48,
	E_PTC_ECO_CV40_8,
	E_PTC_ECO_CV41_0,
	E_PTC_ECO_CV41_1,
	E_PTC_ECO_CV41_2,
	E_PTC_ECO_CV41_3,
	E_PTC_ECO_CV41_4,
	E_PTC_ECO_CV41_5,
	E_PTC_ECO_CV41_6,
	E_PTC_ECO_CV41_7,
	E_PTC_ECO_CV41_8,
	E_PTC_ECO_CV41_9,
	E_PTC_ECO_CV41_10,
	E_PTC_ECO_CV41_12,
	E_PTC_ECO_CV41_13,
	E_PTC_ECO_CV41_14,
	E_PTC_ECO_CV41_16,
	E_PTC_ECO_CV41_17,
	E_PTC_ECO_CV41_18,
	E_PTC_ECO_CV41_19,
	E_PTC_ECO_CV41_20,
	E_PTC_ECO_CV41_21,
	E_PTC_ECO_CV41_22,
	E_PTC_ECO_CV41_23,
	E_PTC_ECO_CV41_24,
	E_PTC_ECO_CV41_25,
	E_PTC_ECO_CV41_32,
	E_PTC_ECO_CV41_33,
	E_PTC_ECO_CV41_34,
	E_PTC_ECO_CV41_35,
	E_PTC_ECO_CV41_37,
	E_PTC_ECO_CV41_38,
	E_PTC_ECO_CV41_39,
	E_PTC_ECO_CV41_40,
	E_PTC_ECO_CV41_41,
	E_PTC_ECO_CV41_42,
	E_PTC_ECO_CV41_43,
	E_PTC_ECO_CV41_44,
	E_PTC_ECO_CV41_45,
	E_PTC_ECO_CV41_48,
	E_PTC_ECO_CV41_52,
	E_PTC_ECO_CV41_56,
	E_PTC_ECO_CV42_0,
	E_PTC_ECO_CV42_16,
	E_PTC_ECO_CV42_32,
	E_PTC_ECO_CV42_40,
	E_PTC_ECO_CV42_48,
	E_PTC_ECO_CV42_56,
	E_PTC_ECO_CV43_0,
	E_PTC_ECO_CV43_4,
	E_PTC_ECO_CV43_5,
	E_PTC_ECO_CV43_8,
	E_PTC_ECO_CV43_16,
	E_PTC_ECO_CV43_24,
	E_PTC_ECO_CV43_40,
	E_PTC_ECO_CV44_0,
	E_PTC_ECO_CV44_16,
	E_PTC_ECO_CV44_32,
	E_PTC_ECO_CV44_48,
	E_PTC_ECO_CV45_0,
	E_PTC_ECO_CV45_8,
	E_PTC_ECO_CV45_16,
	E_PTC_ECO_CV45_32,
	E_PTC_ECO_CV45_48,
	E_PTC_ECO_CV46_24,
	E_PTC_ECO_CV46_32,
	E_PTC_ECO_CV46_48,
	E_PTC_ECO_CV47_0,
	E_PTC_ECO_CV47_16,
	E_PTC_ECO_CV47_32,
	E_PTC_ECO_CV47_48,
	E_PTC_ECO_CV48_0,
	E_PTC_ECO_CV48_16,
	E_PTC_ECO_CV48_32,
	E_PTC_ECO_CV48_48,
	E_PTC_ECO_CV49_0,
	E_PTC_ECO_CV49_16,
	E_PTC_ECO_CV49_32,
	E_PTC_ECO_CV49_48,
	E_PTC_ECO_CV50_0,
	E_PTC_ECO_CV50_16,
	E_PTC_ECO_CV50_32,
	E_PTC_ECO_CV50_48,
	E_PTC_ECO_CV51_0,
	E_PTC_ECO_CV51_16,
	E_PTC_ECO_CV51_32,
	E_PTC_ECO_CV51_48,
	E_PTC_ECO_CV52_0,
	E_PTC_ECO_CV52_16,
	E_PTC_ECO_CV52_32,
	E_PTC_ECO_CV52_48,
	E_PTC_ECO_CV53_0,
	E_PTC_ECO_CV53_32,
	E_PTC_ECO_CV53_48,
	E_PTC_ECO_CV54_32,
	E_PTC_ECO_CV54_48,
	E_PTC_ECO_CV55_0,
	E_PTC_ECO_CV55_16,
	E_PTC_ECO_CV55_32,
	E_PTC_ECO_CV55_48,
	E_PTC_ECO_CV56_0,
	E_PTC_ECO_CV56_16,
	E_PTC_ECO_CV56_32,
	E_PTC_ECO_CV56_48,
	E_PTC_ECO_CV57_0,
	E_PTC_ECO_CV57_16,
	E_PTC_ECO_CV57_32,
	E_PTC_ECO_CV57_48,
	E_PTC_ECO_CV58_0,
	E_PTC_ECO_CV58_16,
	E_PTC_ECO_CV58_32,
	E_PTC_ECO_CV58_48,
	E_PTC_ECO_CV59_0,
	E_PTC_ECO_CV59_16,
	E_PTC_ECO_CV60_0,
	E_PTC_ECO_CV60_16,
	E_PTC_ECO_CV60_32,
	E_PTC_ECO_CV60_40,
	E_PTC_ECO_CV60_48,
	E_PTC_ECO_CV61_7,
	E_PTC_ECO_CV61_8,
	E_PTC_ECO_CV61_16,
	E_PTC_ECO_CV61_32,
	E_PTC_ECO_CV62_0,
	E_PTC_ECO_CV62_16,
	E_PTC_ECO_CV62_32,
	E_PTC_ECO_CV62_48,
	E_PTC_ECO_CV63_0,
	E_PTC_ECO_CV63_16,
	E_PTC_ECO_CV64_0,
	E_PTC_ECO_CV64_16,
	E_PTC_ECO_CV64_32,
	E_PTC_ECO_CV64_48,
	E_PTC_ECO_CV65_0,
	E_PTC_ECO_CV65_16,
	E_PTC_ECO_CV65_32,
	E_PTC_ECO_CV65_48,
	E_PTC_ECO_CV_NUM
};

static float ptc_eco_get(const uint8_t* const  pucData, const enum ePtcEcoCanVal eIdx);
static void ptc_eco_set(const float fVal, const enum ePtcEcoCanVal eIdx, uint16_t sIdx);

extern void ptc_eco_init(void);
extern void ptc_eco_proc(void);

#endif
